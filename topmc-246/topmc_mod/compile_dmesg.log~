1.
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c: 在函数‘topmc_model_detect’中:
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:278: 错误：‘current_cpu_data’未声明(在此函数内第一次使用)
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:278: 错误：(即使在一个函数内多次出现，每个未声明的标识符在其
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:278: 错误：所在的函数内也只报告一次。)
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c: 在函数‘topmc_init’中:
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:355: 错误：隐式声明函数‘create_proc_entry’

2.
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c: 在函数‘topmc_init’中:
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:355: 错误：隐式声明函数‘create_proc_entry’
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:355: 警告：赋值时将整数赋给指针，未作类型转换
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:362: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:363: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:364: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:367: 警告：赋值时将整数赋给指针，未作类型转换
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:374: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:375: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:407: 警告：赋值时将整数赋给指针，未作类型转换
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:409: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:410: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:411: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:420: 警告：赋值时将整数赋给指针，未作类型转换
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:422: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:423: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:424: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:432: 警告：赋值时将整数赋给指针，未作类型转换
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:434: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:435: 错误：提领指向不完全类型的指针
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:436: 错误：提领指向不完全类型的指针
make[1]: *** [/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.o] 错误 1
make: *** [_module_/home/zjt/topmc-process-switch/topmc_mod] 错误 2

3.
[root@asgSender2 topmc_mod]# sh make.sh
make: Entering directory `/home/zjt/linux-3.12.13-topmc/linux-3.12.13'
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_model_nehelam.o
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_model_amd.o
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_mod.o
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:110: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:111: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:133: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:134: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:151: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:152: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:180: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:181: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:206: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:207: 警告：从不兼容的指针类型初始化
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_mod_lib.o
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod_lib.c:3:24: 错误：asm/system.h：没有那个文件或目录
make[1]: *** [/home/zjt/topmc-process-switch/topmc_mod/topmc_mod_lib.o] 错误 1
make: *** [_module_/home/zjt/topmc-process-switch/topmc_mod] 错误 2
make: Leaving directory `/home/zjt/linux-3.12.13-topmc/linux-3.12.13'

4.
[root@asgSender2 topmc_mod]# make clean
rm -f *.ko *.o Module.markers modules.order Module.symvers
[root@asgSender2 topmc_mod]# sh make.sh
make: Entering directory `/home/zjt/linux-3.12.13-topmc/linux-3.12.13'
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_model_nehelam.o
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_model_amd.o
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_mod.o
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:110: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:111: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:133: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:134: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:151: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:152: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:180: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:181: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:206: 警告：从不兼容的指针类型初始化
/home/zjt/topmc-process-switch/topmc_mod/topmc_mod.c:207: 警告：从不兼容的指针类型初始化
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_mod_lib.o
  CC [M]  /home/zjt/topmc-process-switch/topmc_mod/topmc_msr.o
/home/zjt/topmc-process-switch/topmc_mod/topmc_msr.c: 在函数‘topmc_rdmsr_smp’中:
/home/zjt/topmc-process-switch/topmc_mod/topmc_msr.c:19: 错误：隐式声明函数‘this_cpu_read’
make[1]: *** [/home/zjt/topmc-process-switch/topmc_mod/topmc_msr.o] 错误 1
make: *** [_module_/home/zjt/topmc-process-switch/topmc_mod] 错误 2
make: Leaving directory `/home/zjt/linux-3.12.13-topmc/linux-3.12.13'

5.(dmesg)
+->topmc_init() start...
topmc->topmc_model_detect(): vendor:0, family: 6.
topmc->topmc_model_detect(): family of intel 6  model 62 not supported.
The processor is not supported yet.

6.(dmesg)
general protection fault: 0000 [#1] SMP 
Modules linked in: topmc_module(OF+) vfat fat fuse ebtable_nat ebtables xt_CHECKSUM iptable_mangle bridge autofs4 8021q garp stp llc cpufreq_ondemand ipt_REJECT nf_conntrack_ipv4 nf_defrag_ipv4 iptable_filter ip_tables ip6t_REJECT nf_conntrack_ipv6 nf_defrag_ipv6 xt_state nf_conntrack ip6table_filter ip6_tables ipv6 vhost_net macvtap macvlan vhost tun kvm_intel kvm uinput mxm_wmi iTCO_wdt iTCO_vendor_support microcode pcspkr ipmi_si ipmi_msghandler acpi_cpufreq freq_table sg wmi i2c_i801 lpc_ich mfd_core ioatdma igb dca i2c_algo_bit i2c_core ptp pps_core ext4(F) jbd2(F) mbcache(F) usb_storage(F) sd_mod(F) crc_t10dif(F) ahci(F) libahci(F) isci(F) libsas(F) scsi_transport_sas(F) dm_mirror(F) dm_region_hash(F) dm_log(F) dm_mod(F)
CPU: 0 PID: 4419 Comm: insmod Tainted: GF          O 3.12.13-TopMC #1
Hardware name: Supermicro X9DR3-F/X9DR3-F, BIOS 3.2 03/11/2015
task: ffff88045ec1aae0 ti: ffff88046c1ae000 task.ti: ffff88046c1ae000
RIP: 0010:[<ffffffff8129b036>]  [<ffffffff8129b036>] __rdmsr_on_cpu+0x26/0x50
RSP: 0018:ffff88046c1afc28  EFLAGS: 00010046
RAX: 0000000000000000 RBX: 0000000000000246 RCX: 0000000000000391
RDX: ffff88046c1afca8 RSI: ffff88046c1afcb0 RDI: ffff88046c1afca8
RBP: ffff88046c1afc28 R08: ffffffff81af2220 R09: 0000000000000000
R10: 00000000000003be R11: 00000000000003be R12: ffffffff8129b010
R13: 0000000000000000 R14: ffffffff81af2220 R15: 0000000000000001
FS:  00007fe9003c9700(0000) GS:ffff88047fc00000(0000) knlGS:0000000000000000
CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
CR2: 00007fe90037400f CR3: 0000000452393000 CR4: 00000000001407f0
Stack:
 ffff88046c1afc98 ffffffff810b80ec ffff88046c1afca8 ffffffff810b81a5
 0000000000000000 0000000000000000 0000000000000000 0000000000000000
 0000000000000000 ffff88046c1afcb8 ffff88046c1afcf0 ffff88046c1afcf4
Call Trace:
 [<ffffffff810b80ec>] smp_call_function_single+0x7c/0x140
 [<ffffffff810b81a5>] ? smp_call_function_single+0x135/0x140
 [<ffffffff8129b32e>] rdmsr_on_cpu+0x4e/0x70
 [<ffffffffa050a043>] topmc_uncore_global_ctrl_init_nehelam+0x43/0xd0 [topmc_module]
 [<ffffffffa050bcf0>] ? topmc_proc_clean+0x290/0x290 [topmc_module]
 [<ffffffffa050b8f3>] topmc_uncore_global_ctrl_init+0x23/0x30 [topmc_module]
 [<ffffffffa050bd4c>] init_module+0x5c/0x450 [topmc_module]
 [<ffffffff81554ad6>] ? mutex_lock+0x16/0x40
 [<ffffffff81554ad6>] ? mutex_lock+0x16/0x40
 [<ffffffff811093f7>] ? trace_module_notify+0x57/0x160
 [<ffffffffa050bcf0>] ? topmc_proc_clean+0x290/0x290 [topmc_module]
 [<ffffffff810002c2>] do_one_initcall+0xf2/0x1a0
 [<ffffffff81075bc5>] ? __blocking_notifier_call_chain+0x65/0x80
 [<ffffffff810bd204>] do_init_module+0x44/0x1b0
 [<ffffffff810bf412>] load_module+0x5b2/0x6f0
 [<ffffffff810bcb60>] ? __unlink_module+0x30/0x30
 [<ffffffff810bc240>] ? module_sect_show+0x30/0x30
 [<ffffffff810bf712>] SyS_init_module+0xd2/0x120
 [<ffffffff815607d2>] system_call_fastpath+0x16/0x1b
Code: 90 90 90 90 90 55 48 89 e5 0f 1f 44 00 00 48 8b 77 10 65 8b 04 25 20 b0 00 00 48 85 f6 74 26 48 98 48 03 34 c5 80 7b ae 81 8b 0f <0f> 32 48 c1 e2 20 89 c0 48 09 c2 89 16 48 c1 ea 20 89 56 04 c9 
RIP  [<ffffffff8129b036>] __rdmsr_on_cpu+0x26/0x50
 RSP <ffff88046c1afc28>
---[ end trace e0c7b4007a047a49 ]---

